# CausalSDMs ğŸŒŠğŸŸ

### åŸºäºå› æœæ¨æ–­çš„æ²³æµç½‘ç»œç‰©ç§åˆ†å¸ƒå»ºæ¨¡æ¡†æ¶

[![R](https://img.shields.io/badge/R-%E2%89%A54.0-blue.svg)](https://www.r-project.org/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Status](https://img.shields.io/badge/Status-Research_Prototype-orange.svg)]()

> **[English Version (è‹±æ–‡åŸç‰ˆ)](README.md)**

## ğŸ“– é¡¹ç›®æ¦‚è¿°

**CausalSDMs** æ˜¯ä¸€ä¸ªåˆ›æ–°çš„ç§‘ç ”ä»£ç åº“ï¼Œæ—¨åœ¨å°†æ·¡æ°´ç”Ÿç‰©å¤šæ ·æ€§çš„é¢„æµ‹ç ”ç©¶ä»**ç›¸å…³æ€§é¢„æµ‹**æ¨è¿›åˆ°**æœºåˆ¶æ€§æ¨æ–­**ã€‚é€šè¿‡å°†**å› æœå‘ç°**ï¼ˆè´å¶æ–¯ç½‘ç»œï¼‰ä¸ä¼ ç»Ÿçš„**ç‰©ç§åˆ†å¸ƒæ¨¡å‹ï¼ˆSDMsï¼‰**ç›¸ç»“åˆï¼Œæœ¬é¡¹ç›®è‡´åŠ›äºè§£å†³å¤æ‚æ²³æµç½‘ç»œä¸­åŒºåˆ†çœŸå®å› æœé©±åŠ¨å› å­ä¸ä¼ªç›¸å…³å˜é‡çš„éš¾é¢˜ã€‚

æœ¬é¡¹ç›®ä»¥ä¸­å›½å…¨å¢ƒæ·¡æ°´é±¼ç±»åˆ†å¸ƒä¸ºä¾‹ï¼Œåˆ©ç”¨ **EarthEnv-Streams**ï¼ˆåŠ æƒä¸Šæ¸¸é›†æ°´åŒºç¯å¢ƒå˜é‡ï¼‰æ•°æ®ï¼Œç²¾å‡†æ•æ‰æ²³æµç”Ÿç‰©çœŸå®çš„ç”Ÿå¢ƒæš´éœ²ç‰¹å¾ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- **ğŸŒŠ æ²³æµç½‘ç»œä¸€è‡´æ€§**ï¼šé‡‡ç”¨1kmåˆ†è¾¨ç‡çš„â€œä¸Šæ¸¸åŠ æƒâ€å˜é‡ï¼ˆå¦‚æ±‡æµç´¯ç§¯é‡ã€æ°´æ–‡æ°”å€™èšåˆæŒ‡æ ‡ï¼‰ï¼Œè€Œéä¼ ç»Ÿçš„é™†åœ°æ …æ ¼è¦†ç›–ï¼Œç¬¦åˆæ²³æµè¿é€šæ€§ç‰¹å¾ã€‚
- **ğŸ” å› æœç»“æ„å­¦ä¹ **ï¼šåº”ç”¨åŸºäºçº¦æŸï¼ˆ**PCç®—æ³•**ï¼‰å’ŒåŸºäºè¯„åˆ†ï¼ˆ**Hill-Climbing**ï¼‰çš„ç®—æ³•ï¼Œå‘ç°ç¨³å®šçš„ç¯å¢ƒä¾èµ–ç½‘ç»œï¼ˆDAGsï¼‰ã€‚
- **ğŸ“‰ å› æœå˜é‡ç­›é€‰**ï¼šé€šè¿‡å‰”é™¤éå› æœæ··æ‚å› å­ï¼Œå°†é¢„æµ‹å˜é‡ç»´åº¦é™ä½çº¦ **38%**ï¼ŒåŒæ—¶ä¿æŒç”šè‡³æé«˜äº†æ¨¡å‹æ€§èƒ½ï¼ˆAUC/TSSï¼‰ã€‚
- **ğŸ¯ å¼‚è´¨æ€§å¤„ç†æ•ˆåº”**ï¼šåˆ©ç”¨å› æœæ£®æ—ï¼ˆCausal Forestsï¼‰ä¼°è®¡æ¡ä»¶å¹³å‡å¤„ç†æ•ˆåº”ï¼ˆ**CATE**ï¼‰ï¼Œè¯†åˆ«å…·æœ‰é«˜ä¿æŠ¤ä»·å€¼çš„ç©ºé—´åŒºåŸŸã€‚
- **ğŸ”® ç¨³å¥çš„æœªæ¥é¢„æµ‹**ï¼šé‡åŒ–å¹¶åŒºåˆ†äº†**ç»“æ„ä¸ç¡®å®šæ€§**ï¼ˆç®—æ³•å·®å¼‚ï¼‰ä¸**æƒ…æ™¯ä¸ç¡®å®šæ€§**ï¼ˆæ’æ”¾è·¯å¾„å·®å¼‚ï¼‰ã€‚

## ğŸ“‚ ç›®å½•ç»“æ„

```text
E:\CausalSDMs\
â”œâ”€â”€ data-main/               # æ ¸å¿ƒç¯å¢ƒæ•°æ® (çŸ¢é‡/æ …æ ¼)
â”œâ”€â”€ scripts/                 # åˆ†ææµç¨‹è„šæœ¬ (æŒ‰æ­¥éª¤ç¼–å·)
â”‚   â”œâ”€â”€ 01-04_...           # æ•°æ®å‡†å¤‡ä¸å…±çº¿æ€§åˆ†æ
â”‚   â”œâ”€â”€ 05-08_...           # SDMæ¨¡å‹è®­ç»ƒ (Maxent, RF, GAM, NN) ä¸è¯„ä¼°
â”‚   â”œâ”€â”€ 09-13_...           # å˜é‡é‡è¦æ€§ã€å“åº”æ›²çº¿ä¸åˆ¶å›¾
â”‚   â”œâ”€â”€ 14_causal...        # å› æœå‘ç°ä¸ATEä¼°è®¡
â”‚   â””â”€â”€ 15_future...        # æœªæ¥æ°”å€™é¢„æµ‹ä¸æ¨¡å‹é‡è®­ç»ƒ
â”œâ”€â”€ figures/                 # è®ºæ–‡å›¾è¡¨ (Natureæ ‡å‡†æ ¼å¼)
â”œâ”€â”€ output/                  # æ¨¡å‹å¯¹è±¡ã€ä¸­é—´CSVç»“æœä¸æ …æ ¼æ–‡ä»¶
â”œâ”€â”€ manuscript_*.md          # è®ºæ–‡è‰ç¨¿ä¸æ ¸å¿ƒå†…å®¹
â””â”€â”€ README_CN.md             # ä¸­æ–‡è¯´æ˜æ–‡æ¡£
```

## ğŸš€ åˆ†ææµç¨‹

ä¸ºç¡®ä¿å¯é‡å¤æ€§ï¼Œåˆ†ææµç¨‹è„šæœ¬å·²æŒ‰é¡ºåºç¼–å·ï¼š

1.  **æ•°æ®å‡†å¤‡**ï¼šæ¸…æ´—åˆ†å¸ƒç‚¹è®°å½•å¹¶æå– EarthEnv-Streams å˜é‡ (`01_data_preparation_NEW.R`)ã€‚
2.  **åŸºç¡€å»ºæ¨¡**ï¼šä½¿ç”¨å…¨å˜é‡é›†è®­ç»ƒå››ç§ç®—æ³•ï¼ˆMaxent, Random Forest, GAM, NNï¼‰ (`05_model_maxnet.R` è‡³ `07_model_gam.R`)ã€‚
3.  **å› æœå‘ç°**ï¼š
    *   ä½¿ç”¨ PC å’Œ Hill-Climbing ç®—æ³•æ¨æ–­å› æœæœ‰å‘æ— ç¯å›¾ (DAG) (`14_causal_discovery.R`)ã€‚
    *   ä½¿ç”¨åŒé‡æœºå™¨å­¦ä¹  (Double Machine Learning) ä¼°è®¡å¹³å‡å¤„ç†æ•ˆåº” (ATE) (`14c_batch_ate_estimation.R`)ã€‚
4.  **å› æœé©±åŠ¨é‡è®­ç»ƒ**ï¼šä»…ä½¿ç”¨ç»å› æœéªŒè¯çš„é¢„æµ‹å› å­é‡æ–°è®­ç»ƒæ¨¡å‹ (`15b_causal_informed_retraining.R`)ã€‚
5.  **ä¿æŠ¤è§„åˆ’**ï¼šç”Ÿæˆ CATE å›¾ä¸æœªæ¥é€‚å®œæ€§é¢„æµ‹ (`11d_cate_maps.R`, `15_future_env_projection.R`)ã€‚

## ğŸ“Š å…³é”®å‘ç°

*   **é«˜æ•ˆæ€§**ï¼šå› æœç­›é€‰å°†é¢„æµ‹å› å­ä» **47ä¸ªå‡å°‘è‡³çº¦29ä¸ª**ï¼Œæ˜¾è‘—æé«˜äº†æ¨¡å‹çš„å¯è¿ç§»æ€§ã€‚
*   **ç¨³å®šæ€§**ï¼šè¯†åˆ«å‡ºç¨³å®šçš„å› æœæ¨¡å—ç»“æ„ï¼š*åœ°å½¢ (Topography) â†’ æ°”å€™ (Climate) â†’ åœŸåœ°è¦†ç›–/åœŸå£¤ (Land Cover/Soil)*ã€‚
*   **ä¸ç¡®å®šæ€§**ï¼šç ”ç©¶å‘ç°ï¼Œåœ¨ä¸–çºªä¸­å¶çš„é¢„æµ‹ä¸­ï¼Œç»“æ„ï¼ˆç®—æ³•ï¼‰ä¸ç¡®å®šæ€§æ˜¾è‘—è¶…è¿‡äº†æ°”å€™æƒ…æ™¯ä¸ç¡®å®šæ€§ã€‚

## ğŸ› ï¸ ç¯å¢ƒè¦æ±‚

*   **R** (ç‰ˆæœ¬ >= 4.0.0)
*   **æ ¸å¿ƒ R åŒ…**: `maxnet`, `randomForest`, `mgcv`, `nnet`, `pcalg`, `bnlearn`, `grf`, `DoubleML`, `terra`, `sf`.
*   **Python** (å¯é€‰ï¼Œç”¨äºç‰¹å®šå¯è§†åŒ–): `matplotlib`, `seaborn`.

## ğŸ“œ å¼•ç”¨

å¦‚æœæ‚¨ä½¿ç”¨äº†æœ¬é¡¹ç›®çš„ä»£ç æˆ–æ–¹æ³•ï¼Œè¯·å¼•ç”¨ç›¸å…³æ‰‹ç¨¿ï¼š

> *Causal inference reveals mechanism-driven freshwater fish distribution under climate change: a river network perspective.* (In Preparation/Review)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦æƒ…è¯·è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚
